<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<title>محاسبه حد پیشرفته</title>
<script src="https://unpkg.com/algebrite"></script>
<style>
  body { font-family: Tahoma, sans-serif; margin: 40px; background: #f5f5f5; }
  h2 { color: #333; }
  input, select, button { padding: 8px; margin: 5px 0; width: 100%; font-size: 16px; }
  button { background: #4CAF50; color: white; border: none; cursor: pointer; border-radius: 5px; }
  button:hover { background: #45a049; }
  .result { margin-top: 20px; padding: 15px; background: #fff; border-radius: 10px; box-shadow: 1px 1px 10px rgba(0,0,0,0.1); }
  .error { color: red; font-weight: bold; }
</style>
</head>
<body>

<h2>ماشین حساب حد پیشرفته</h2>

<label>تابع (مثال: sin(x)/x یا log(x)):</label>
<input type="text" id="func" placeholder="تابع خود را وارد کنید">

<label>نقطه حد (مثال: 2، Infinity یا -Infinity):</label>
<input type="text" id="point" placeholder="x → ">

<button onclick="calculateLimit()">محاسبه حد</button>

<div class="result" id="output"></div>

<script>
function calculateLimit() {
    let f = document.getElementById("func").value.trim();
    let x0 = document.getElementById("point").value.trim();
    let output = document.getElementById("output");

    if(f === "" || x0 === "") {
        output.innerHTML = "<span class='error'>لطفا همه ورودی‌ها را پر کنید.</span>";
        return;
    }

    try {
        // جایگزینی Infinity و -Infinity
        let point = x0.toLowerCase();
        if(point === "infinity") x0 = "inf";
        if(point === "-infinity") x0 = "-inf";

        // حد چپ
        let left = Algebrite.run(`limit(${f}, x, ${x0}, -1)`);
        // حد راست
        let right = Algebrite.run(`limit(${f}, x, ${x0}, 1)`);
        // حد اصلی
        let mainLimit = (left === right) ? left : "حد وجود ندارد";

        output.innerHTML = `
            <b>حد چپ:</b> ${left} <br>
            <b>حد راست:</b> ${right} <br>
            <b>حد اصلی:</b> ${mainLimit}
        `;
    } catch (e) {
        output.innerHTML = "<span class='error'>خطا در محاسبه تابع. لطفا تابع را بررسی کنید.</span>";
    }
}
</script>

</body>
</html>
