<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ù…Ø§Ø´ÛŒÙ† Ø­Ø³Ø§Ø¨ Ú¯Ø§Ù…â€ŒØ¨Ù‡â€ŒÚ¯Ø§Ù… Ø§Ù…Ù†</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/11.11.0/math.min.js"></script>
<style>
body {
    font-family: 'Vazirmatn', sans-serif;
    background: linear-gradient(180deg, #f5f7fa, #c3cfe2);
    text-align: center;
    padding: 40px;
}
h1 { color: #222; margin-bottom: 20px; }
select, input, button {
    padding: 10px;
    margin: 8px;
    font-size: 16px;
    border: 1px solid #ccc;
    border-radius: 8px;
}
button {
    cursor: pointer;
    background-color: #3b82f6;
    color: #fff;
    border: none;
    transition: 0.2s;
}
button:hover { background-color: #2563eb; }
#steps {
    margin-top: 25px;
    text-align: left;
    display: inline-block;
    background: #fff;
    padding: 20px;
    border-radius: 12px;
    box-shadow: 0 0 15px #bbb;
    max-width: 600px;
    min-height: 100px;
    direction: rtl;
    font-size: 17px;
}
.step { margin-bottom: 12px; animation: fadeIn 0.4s ease; }
@keyframes fadeIn {
    from {opacity: 0; transform: translateY(5px);}
    to {opacity: 1; transform: translateY(0);}
}
</style>
</head>
<body>

<h1>ğŸ§® Ù…Ø§Ø´ÛŒÙ† Ø­Ø³Ø§Ø¨ Ú¯Ø§Ù…â€ŒØ¨Ù‡â€ŒÚ¯Ø§Ù… Ø§Ù…Ù† (Math.js)</h1>

<label for="calcType">Ù†ÙˆØ¹ Ù…Ø­Ø§Ø³Ø¨Ù‡:</label>
<select id="calcType">
    <option value="limit">Ø­Ø¯</option>
    <option value="derivative">Ù…Ø´ØªÙ‚</option>
    <option value="integral">Ø§Ù†ØªÚ¯Ø±Ø§Ù„ Ø³Ø§Ø¯Ù‡</option>
</select>
<br>

<input type="text" id="question" placeholder="Ù…Ø«Ø§Ù„: sin(x) + x^2">
<br>

<input type="text" id="limitPoint" placeholder="Ù†Ù‚Ø·Ù‡ Ø­Ø¯ (Ø¨Ø±Ø§ÛŒ Ø­Ø¯ØŒ Ù…Ø«Ø§Ù„: 0)">
<br>

<button id="startButton">Ø´Ø±ÙˆØ¹ Ú¯Ø§Ù…â€ŒØ¨Ù‡â€ŒÚ¯Ø§Ù…</button>
<button id="nextButton" style="display:none;">Ù…Ø±Ø­Ù„Ù‡ Ø¨Ø¹Ø¯ âœ</button>

<div id="steps"></div>

<script>
let steps = [];
let currentStep = 0;

function isBalanced(expr) {
    let stack = [];
    for (let ch of expr) {
        if (ch === '(') stack.push(ch);
        else if (ch === ')') {
            if (stack.length === 0) return false;
            stack.pop();
        }
    }
    return stack.length === 0;
}

function prepareSteps() {
    const exprInput = document.getElementById('question').value.trim();
    const calcType = document.getElementById('calcType').value;
    const limitPoint = document.getElementById('limitPoint').value.trim();
    steps = [];
    currentStep = 0;

    if (!exprInput) {
        steps.push('â— Ù„Ø·ÙØ§Ù‹ Ø§Ø¨ØªØ¯Ø§ ØªØ§Ø¨Ø¹ Ø®ÙˆØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯.');
        return;
    }

    if (!isBalanced(exprInput)) {
        steps.push('â— Ù¾Ø±Ø§Ù†ØªØ²Ù‡Ø§ÛŒ ØªØ§Ø¨Ø¹ Ù†Ø§Ù…ØªØ¹Ø§Ø¯Ù„ Ù‡Ø³ØªÙ†Ø¯.');
        return;
    }

    try {
        if (calcType === 'derivative') {
            steps.push(ØªØ§Ø¨Ø¹ Ø¯Ø§Ø¯Ù‡ Ø´Ø¯Ù‡: ${exprInput});
            steps.push('ğŸ”¹ Ù…Ø±Ø­Ù„Ù‡ Û±: Ø´Ù†Ø§Ø³Ø§ÛŒÛŒ ØªØ§Ø¨Ø¹ Ùˆ Ù…ØªØºÛŒØ± x');
            const derivative = math.derivative(exprInput, 'x').toString();
            steps.push(ğŸ”¹ Ù…Ø±Ø­Ù„Ù‡ Û²: Ù†ØªÛŒØ¬Ù‡ Ù…Ø´ØªÙ‚: ${derivative});

        } else if (calcType === 'integral') {
            steps.push(ØªØ§Ø¨Ø¹ Ø¯Ø§Ø¯Ù‡ Ø´Ø¯Ù‡: ${exprInput});
            steps.push('ğŸ”¹ Ù…Ø±Ø­Ù„Ù‡ Û±: Ø§Ù†ØªÚ¯Ø±Ø§Ù„ Ø³Ø§Ø¯Ù‡ (Ù†Ù…Ø§Ø¯ÛŒÙ† Ù…Ø­Ø¯ÙˆØ¯ Ø¨Ù‡ Ø¬Ù…Ø¹ Ùˆ ØªÙˆØ§Ù†)');
            steps.push('ğŸ”¹ Ù…Ø±Ø­Ù„Ù‡ Û²: Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ø«Ø§Ø¨Øª C');
            // Ø§Ù†ØªÚ¯Ø±Ø§Ù„ Ø¹Ø¯Ø¯ÛŒ Ø³Ø§Ø¯Ù‡ Ø¨Ø§ math.js (Ù†Ù…Ø§Ø¯ÛŒÙ† Ù…Ø­Ø¯ÙˆØ¯)
            try {
                const integralVal = math.integral ? math.integral(exprInput, 'x').toString() : 'âˆ«(' + exprInput + ') dx';
                steps.push(ğŸ”¹ Ù†ØªÛŒØ¬Ù‡ Ù†Ù‡Ø§ÛŒÛŒ: ${integralVal} + C);
            } catch {
                steps.push('âš ï¸ Ø§Ù†ØªÚ¯Ø±Ø§Ù„ Ù†Ù…Ø§Ø¯ÛŒÙ† Ø¨Ø±Ø§ÛŒ Ø§ÛŒÙ† ØªØ§Ø¨Ø¹ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ù†Ù…ÛŒâ€ŒØ´ÙˆØ¯.');
            }

        } else if (calcType === 'limit') {
            if (limitPoint === '') {
                steps.push('â— Ù„Ø·ÙØ§Ù‹ Ù†Ù‚Ø·Ù‡ Ø­Ø¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯.');
            } else {
                const xVal = parseFloat(limitPoint);
                if (isNaN(xVal)) {
                    steps.push('â— Ù…Ù‚Ø¯Ø§Ø± Ù†Ù‚Ø·Ù‡ Ø­Ø¯ Ù…Ø¹ØªØ¨Ø± Ù†ÛŒØ³Øª!');

Amirali, [11/13/2025 10:01 PM]
return;
                }
                steps.push(ØªØ§Ø¨Ø¹ Ø¯Ø§Ø¯Ù‡ Ø´Ø¯Ù‡: ${exprInput});
                steps.push(ğŸ”¹ Ù…Ø±Ø­Ù„Ù‡ Û±: Ø¬Ø§ÛŒÚ¯Ø°Ø§Ø±ÛŒ x = ${xVal});
                const f = math.compile(exprInput);
                const value = f.evaluate({x: xVal});
                steps.push(ğŸ”¹ Ù…Ø±Ø­Ù„Ù‡ Û²: Ù†ØªÛŒØ¬Ù‡ Ù†Ù‡Ø§ÛŒÛŒ Ø­Ø¯ â‰ˆ ${value});
            }
        }
    } catch {
        steps.push('âš ï¸ Ø®Ø·Ø§ Ø¯Ø± Ù…Ø­Ø§Ø³Ø¨Ù‡. Ù„Ø·ÙØ§Ù‹ ØªØ§Ø¨Ø¹ Ù…Ø¹ØªØ¨Ø± ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯.');
    }
}

function showNextStep() {
    if (currentStep < steps.length) {
        const stepsDiv = document.getElementById('steps');
        const div = document.createElement('div');
        div.className = 'step';
        div.textContent = steps[currentStep];
        stepsDiv.appendChild(div);
        currentStep++;
        if (currentStep === steps.length) {
            document.getElementById('nextButton').style.display = 'none';
        }
    }
}

document.getElementById('startButton').addEventListener('click', function() {
    document.getElementById('steps').innerHTML = '';
    prepareSteps();
    currentStep = 0;
    if (steps.length > 0) {
        document.getElementById('nextButton').style.display = 'inline-block';
        showNextStep();
    }
});

document.getElementById('nextButton').addEventListener('click', showNextStep);
</script>

</body>
</html>



