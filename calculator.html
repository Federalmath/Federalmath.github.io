<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ù…Ø§Ø´ÛŒÙ† Ø­Ø³Ø§Ø¨ Ú¯Ø§Ù…â€ŒØ¨Ù‡â€ŒÚ¯Ø§Ù… ÙÙˆÙ‚â€ŒÙ¾ÛŒØ´Ø±ÙØªÙ‡</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/11.11.0/math.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/algebrite@1.5.0/dist/algebrite.min.js"></script>
<style>
body {
    font-family: 'Vazirmatn', sans-serif;
    background: linear-gradient(180deg, #f5f7fa, #c3cfe2);
    text-align: center;
    padding: 40px;
}
h1 { color: #222; margin-bottom: 20px; }
select, input, button {
    padding: 10px;
    margin: 8px;
    font-size: 16px;
    border: 1px solid #ccc;
    border-radius: 8px;
}
button {
    cursor: pointer;
    background-color: #3b82f6;
    color: #fff;
    border: none;
    transition: 0.2s;
}
button:hover { background-color: #2563eb; }
#steps {
    margin-top: 25px;
    text-align: left;
    display: inline-block;
    background: #fff;
    padding: 20px;
    border-radius: 12px;
    box-shadow: 0 0 15px #bbb;
    max-width: 600px;
    min-height: 100px;
    direction: rtl;
    font-size: 17px;
}
.step { margin-bottom: 12px; animation: fadeIn 0.4s ease; }
@keyframes fadeIn {
    from {opacity: 0; transform: translateY(5px);}
    to {opacity: 1; transform: translateY(0);}
}
</style>
</head>
<body>

<h1>ğŸ§® Ù…Ø§Ø´ÛŒÙ† Ø­Ø³Ø§Ø¨ Ú¯Ø§Ù…â€ŒØ¨Ù‡â€ŒÚ¯Ø§Ù… ÙÙˆÙ‚â€ŒÙ¾ÛŒØ´Ø±ÙØªÙ‡</h1>

<label for="calcType">Ù†ÙˆØ¹ Ù…Ø­Ø§Ø³Ø¨Ù‡:</label>
<select id="calcType">
    <option value="limit">Ø­Ø¯</option>
    <option value="derivative">Ù…Ø´ØªÙ‚</option>
    <option value="integral">Ø§Ù†ØªÚ¯Ø±Ø§Ù„</option>
</select>
<br>

<input type="text" id="question" placeholder="Ù…Ø«Ø§Ù„: sin(x) + x^2 + ln(x)">
<br>

<input type="text" id="limitPoint" placeholder="Ù†Ù‚Ø·Ù‡ Ø­Ø¯ (Ø¨Ø±Ø§ÛŒ Ø­Ø¯ØŒ Ù…Ø«Ø§Ù„: 0)">
<br>

<button id="startButton">Ø´Ø±ÙˆØ¹ Ú¯Ø§Ù…â€ŒØ¨Ù‡â€ŒÚ¯Ø§Ù…</button>
<button id="nextButton" style="display:none;">Ù…Ø±Ø­Ù„Ù‡ Ø¨Ø¹Ø¯ âœ</button>

<div id="steps"></div>

<script>
let steps = [];
let currentStep = 0;

// ØªØ§Ø¨Ø¹ Ø¨Ø±Ø±Ø³ÛŒ ØªØ¹Ø§Ø¯Ù„ Ù¾Ø±Ø§Ù†ØªØ²Ù‡Ø§
function isBalanced(expr) {
    let stack = [];
    for (let ch of expr) {
        if (ch === '(') stack.push(ch);
        else if (ch === ')') {
            if (stack.length === 0) return false;
            stack.pop();
        }
    }
    return stack.length === 0;
}

function prepareSteps() {
    const exprInput = document.getElementById('question').value.trim();
    const calcType = document.getElementById('calcType').value;
    const limitPoint = document.getElementById('limitPoint').value.trim();
    steps = [];
    currentStep = 0;

    if (!exprInput) {
        steps.push('â— Ù„Ø·ÙØ§Ù‹ Ø§Ø¨ØªØ¯Ø§ ØªØ§Ø¨Ø¹ Ø®ÙˆØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯.');
        return;
    }

    // Ú†Ú© ØªØ¹Ø§Ø¯Ù„ Ù¾Ø±Ø§Ù†ØªØ²Ù‡Ø§
    if (!isBalanced(exprInput)) {
        steps.push('â— Ù¾Ø±Ø§Ù†ØªØ²Ù‡Ø§ÛŒ ØªØ§Ø¨Ø¹ Ù†Ø§Ù…ØªØ¹Ø§Ø¯Ù„ Ù‡Ø³ØªÙ†Ø¯.');
        return;
    }

    try {
        if (calcType === 'derivative') {
            steps.push(ØªØ§Ø¨Ø¹ Ø¯Ø§Ø¯Ù‡ Ø´Ø¯Ù‡: ${exprInput});
            steps.push('ğŸ”¹ Ù…Ø±Ø­Ù„Ù‡ Û±: Ø´Ù†Ø§Ø³Ø§ÛŒÛŒ ØªØ§Ø¨Ø¹ Ùˆ Ù…ØªØºÛŒØ± Ù…Ø³ØªÙ‚Ù„ x');
            // Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² JSON.stringify Ø¨Ø±Ø§ÛŒ Ø§Ù…Ù† Ú©Ø±Ø¯Ù† ÙˆØ±ÙˆØ¯ÛŒ
            const derived = Algebrite.eval("d(" + JSON.stringify(exprInput) + ", x)");
            steps.push('ğŸ”¹ Ù…Ø±Ø­Ù„Ù‡ Û²: Ø§Ø¹Ù…Ø§Ù„ Ù‚ÙˆØ§Ø¹Ø¯ Ù…Ø´ØªÙ‚â€ŒÚ¯ÛŒØ±ÛŒ (Ù‚Ø§Ù†ÙˆÙ† ØªÙˆØ§Ù†ØŒ Ø¬Ù…Ø¹ØŒ Ø²Ù†Ø¬ÛŒØ±Ù‡â€ŒØ§ÛŒ Ùˆ ØºÛŒØ±Ù‡)');
            steps.push(ğŸ”¹ Ù…Ø±Ø­Ù„Ù‡ Û³: Ù†ØªÛŒØ¬Ù‡ Ù†Ù‡Ø§ÛŒÛŒ Ù…Ø´ØªÙ‚: ${derived});

        } else if (calcType === 'integral') {
            steps.push(ØªØ§Ø¨Ø¹ Ø¯Ø§Ø¯Ù‡ Ø´Ø¯Ù‡: ${exprInput});
            steps.push('ğŸ”¹ Ù…Ø±Ø­Ù„Ù‡ Û±: Ø´Ù†Ø§Ø³Ø§ÛŒÛŒ ØªØ§Ø¨Ø¹ Ø¨Ø±Ø§ÛŒ Ø§Ù†ØªÚ¯Ø±Ø§Ù„â€ŒÚ¯ÛŒØ±ÛŒ');
            const integral = Algebrite.eval("integral(" + JSON.stringify(exprInput) + ", x)");
            steps.push('ğŸ”¹ Ù…Ø±Ø­Ù„Ù‡ Û²: Ø§Ø¹Ù…Ø§Ù„ Ù‚ÙˆØ§Ù†ÛŒÙ† Ø§Ù†ØªÚ¯Ø±Ø§Ù„â€ŒÚ¯ÛŒØ±ÛŒ (Ù†Ù…Ø§Ø¯ÛŒÙ†)');
            steps.push('ğŸ”¹ Ù…Ø±Ø­Ù„Ù‡ Û³: Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ø«Ø§Ø¨Øª C');
            steps.push(ğŸ”¹ Ù†ØªÛŒØ¬Ù‡ Ù†Ù‡Ø§ÛŒÛŒ Ø§Ù†ØªÚ¯Ø±Ø§Ù„: ${integral} + C);

        } else if (calcType === 'limit') {
            if (limitPoint === '') {
                steps.push('â— Ù„Ø·ÙØ§Ù‹ Ù†Ù‚Ø·Ù‡ Ø­Ø¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯.');

Amirali, [11/13/2025 9:56 PM]
} else {
                const xVal = parseFloat(limitPoint);
                if (isNaN(xVal)) {
                    steps.push('â— Ù…Ù‚Ø¯Ø§Ø± Ù†Ù‚Ø·Ù‡ Ø­Ø¯ Ù…Ø¹ØªØ¨Ø± Ù†ÛŒØ³Øª!');
                    return;
                }
                steps.push(ØªØ§Ø¨Ø¹ Ø¯Ø§Ø¯Ù‡ Ø´Ø¯Ù‡: ${exprInput});
                steps.push(ğŸ”¹ Ù…Ø±Ø­Ù„Ù‡ Û±: ØªØ¹ÛŒÛŒÙ† Ù†Ù‚Ø·Ù‡ Ø­Ø¯ â†’ x â†’ ${xVal});
                steps.push('ğŸ”¹ Ù…Ø±Ø­Ù„Ù‡ Û²: Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¬ÙˆØ¯ Ø­Ø¯ Ú†Ù¾ Ùˆ Ø±Ø§Ø³Øª (Ù†Ù…ÙˆÙ†Ù‡ Ø³Ø§Ø¯Ù‡)');
                const expr = math.parse(exprInput).compile();
                const value = expr.evaluate({x: xVal});
                steps.push(ğŸ”¹ Ù…Ø±Ø­Ù„Ù‡ Û³: Ø¬Ø§ÛŒÚ¯Ø°Ø§Ø±ÛŒ Ù…Ù‚Ø¯Ø§Ø± x = ${xVal});
                steps.push(ğŸ”¹ Ù…Ø±Ø­Ù„Ù‡ Û´: Ù†ØªÛŒØ¬Ù‡ Ù†Ù‡Ø§ÛŒÛŒ Ø­Ø¯ = ${value});
            }
        }
    } catch (err) {
        steps.push('âš ï¸ Ø®Ø·Ø§ Ø¯Ø± Ù…Ø­Ø§Ø³Ø¨Ù‡. Ù„Ø·ÙØ§Ù‹ ØªØ§Ø¨Ø¹ Ù…Ø¹ØªØ¨Ø± ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯.');
    }
}

function showNextStep() {
    if (currentStep < steps.length) {
        const stepsDiv = document.getElementById('steps');
        const div = document.createElement('div');
        div.className = 'step';
        div.textContent = steps[currentStep];
        stepsDiv.appendChild(div);
        currentStep++;
        if (currentStep === steps.length) {
            document.getElementById('nextButton').style.display = 'none';
        }
    }
}

document.getElementById('startButton').addEventListener('click', function() {
    document.getElementById('steps').innerHTML = '';
    prepareSteps();
    currentStep = 0;
    if (steps.length > 0) {
        document.getElementById('nextButton').style.display = 'inline-block';
        showNextStep();
    }
});

document.getElementById('nextButton').addEventListener('click', showNextStep);
</script>

</body>
</html>


